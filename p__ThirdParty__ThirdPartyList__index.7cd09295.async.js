"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[241],{57660:function(W,w,r){r.r(w),r.d(w,{default:function(){return re}});var z=r(15009),o=r.n(z),C=r(99289),S=r.n(C),O=r(5574),j=r.n(O),R=r(75472),K=r(65763),F=r(90930),A=r(38521),b=r(94272),E=r(58073),D=r(86738),p=r(2453),T=r(83622),M=r(67294),H=r(6742),$=r(34994),J=r(37476),G=r(26915),Q=r(26412),Y=r(37804),X=r(52720),a=r(85893),q=function(k){var V=k.visible,x=k.onVisibleChange,N=k.onFinish,m=k.currentUser,P=(0,M.useRef)(),L=(0,M.useState)(void 0),U=j()(L,2),c=U[0],f=U[1],Z=(0,b.useIntl)(),y=(0,M.useState)([]),s=j()(y,2),u=s[0],h=s[1];if(m){var l;(l=P.current)===null||l===void 0||l.setFieldsValue({orgName:m.orgName,tradingFeeRate:m.tradingFeeRate/100,commissionRate:m.commissionRate/100,icon:m.icon})}var i=function(){var I=S()(o()().mark(function v(t){var g,d;return o()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(g="",!m){n.next=5;break}g=m.guid,n.next=8;break;case 5:if(c){n.next=7;break}return n.abrupt("return");case 7:g=c.guid;case 8:return n.prev=8,n.next=11,R.Z.thirdParty.add(g,t.orgName,t.tradingFeeRate,t.commissionRate,t.icon);case 11:p.ZP.success("success"),x(!1),N(),(d=P.current)===null||d===void 0||d.resetFields(),n.next=22;break;case 17:return n.prev=17,n.t0=n.catch(8),console.error(n.t0),p.ZP.error("error: "+String(n.t0)),n.abrupt("return",!1);case 22:case"end":return n.stop()}},v,null,[[8,17]])}));return function(t){return I.apply(this,arguments)}}(),e=function(){var I=S()(o()().mark(function v(t){var g,d;return o()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,t.target.value){n.next=3;break}return n.abrupt("return");case 3:return n.next=5,(0,H.getUserByRef)(t.target.value);case 5:g=n.sent,g!==void 0&&(d={guid:g.guid,tgUsername:g.tgUsername,email:g.email,vip:g.vip,remark:g.remark},p.ZP.success("User Found"),f(d)),n.next=13;break;case 9:n.prev=9,n.t0=n.catch(0),f(void 0),p.ZP.error(Z.formatMessage({id:"pages.overall.user.notFound"}));case 13:case"end":return n.stop()}},v,null,[[0,9]])}));return function(t){return I.apply(this,arguments)}}();(0,M.useEffect)(function(){h(c?[{key:"1",label:"Guid",children:c.guid},{key:"2",label:"Tg Username",children:c.tgUsername},{key:"3",label:"Email",children:c.email},{key:"4",label:"Vip Level",children:c.vip},{key:"5",label:"Remark",span:2,children:c.remark}]:[])},[c]);var B=function(){if(!m)return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)($.A.Item,{name:"refCode",label:Z.formatMessage({id:"pages.overall.newSvip.refCode"}),rules:[{required:!0,message:"Please enter refCode!"}],children:(0,a.jsx)(G.Z,{onBlur:e,placeholder:Z.formatMessage({id:"pages.overall.newSvip.refCode.placeholder"}),max:16})}),c&&(0,a.jsx)(Q.Z,{size:"small",title:"User Info",layout:"vertical",items:u})]})};return(0,a.jsxs)(J.Y,{open:V,onOpenChange:function(v){if(!v){var t;P==null||(t=P.current)===null||t===void 0||t.resetFields(),x(v)}},clearOnDestroy:!0,onFinish:i,formRef:P,children:[B(),(0,a.jsx)($.A.Item,{name:"orgName",label:Z.formatMessage({id:"pages.thirdParty.orgName"}),rules:[{required:!0,message:"Please enter Organization Name!"}],children:(0,a.jsx)(G.Z,{max:24})}),(0,a.jsx)($.A.Item,{name:"tradingFeeRate",label:Z.formatMessage({id:"pages.thirdParty.tradingFeeRate"}),rules:[{required:!0,message:"Please enter Trading Fee Rate!"}],initialValue:6,children:(0,a.jsx)(Y.Z,{size:"large",addonAfter:"%",precision:0,min:0,max:100})}),(0,a.jsx)($.A.Item,{name:"commissionRate",label:Z.formatMessage({id:"pages.thirdParty.commissionRate"}),rules:[{required:!0,message:"Please enter Commission Rate!"}],initialValue:30,children:(0,a.jsx)(Y.Z,{size:"large",addonAfter:"%",precision:0,min:0,max:100})}),(0,a.jsx)($.A.Item,{name:"icon",label:Z.formatMessage({id:"icon"}),rules:[{required:!0,message:"Please upload icon!"}],children:(0,a.jsx)(X.Ur,{uploadFinish:function(v){var t;(t=P.current)===null||t===void 0||t.setFieldsValue({icon:v})},url:m==null?void 0:m.icon})})]})},_=q,ee=function(){var k=(0,M.useState)(void 0),V=j()(k,2),x=V[0],N=V[1],m=(0,M.useState)(!1),P=j()(m,2),L=P[0],U=P[1],c=(0,M.useRef)(),f=(0,b.useIntl)(),Z=[{title:f.formatMessage({id:"icon"}),dataIndex:"icon",hideInSearch:!0,render:function(s,u){return(0,a.jsx)(E.Z,{src:u.icon,width:32,height:32})}},{title:f.formatMessage({id:"name"}),dataIndex:"orgName",hideInSearch:!0},{title:"Guid",dataIndex:"guid"},{title:"Email",dataIndex:"email",hideInSearch:!0},{title:f.formatMessage({id:"status"}),dataIndex:"status",hideInSearch:!0,valueEnum:{able:{text:"Active",color:"green"},disable:{text:"Frozen",color:"red"}}},{title:f.formatMessage({id:"pages.thirdParty.userNums"}),dataIndex:"userNums",hideInSearch:!0},{title:f.formatMessage({id:"pages.thirdParty.volumes"}),dataIndex:"volumes",hideInSearch:!0,renderText:function(s){return"$"+(0,K.B)(s,3)}},{title:f.formatMessage({id:"pages.thirdParty.txns"}),dataIndex:"txns",hideInSearch:!0},{title:f.formatMessage({id:"pages.thirdParty.feeRate"}),dataIndex:"tradingFeeRate",hideInSearch:!0,renderText:function(s){return s/100+"%"}},{title:f.formatMessage({id:"pages.thirdParty.commissionRate"}),dataIndex:"commissionRate",hideInSearch:!0,renderText:function(s){return s/100+"%"}},{title:f.formatMessage({id:"pages.thirdParty.channelCommission"}),dataIndex:"channelCommission",hideInSearch:!0,renderText:function(s){return"$"+(0,K.B)(s,3)}},{title:"API Key",dataIndex:"apiKey",hideInSearch:!0},{title:f.formatMessage({id:"options"}),hideInSearch:!0,render:function(s,u){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(D.Z,{title:"Reset API Key",description:"Are you sure to Reset API Key?",onConfirm:S()(o()().mark(function h(){var l;return o()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R.Z.thirdParty.resetApiKey(u.guid);case 3:p.ZP.success("Reset API Key success"),(l=c.current)===null||l===void 0||l.reload(),e.next=12;break;case 7:return e.prev=7,e.t0=e.catch(0),console.error(e.t0),p.ZP.error("Reset API Key error:"+String(e.t0)),e.abrupt("return",!1);case 12:case"end":return e.stop()}},h,null,[[0,7]])})),okText:"Yes",cancelText:"No",children:(0,a.jsx)(T.ZP,{type:"link",children:"Reset API Key"})}),(0,a.jsx)(D.Z,{title:"Send API Key",description:"Are you sure to Send API Key to ".concat(u.email,"?"),onConfirm:S()(o()().mark(function h(){return o()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,R.Z.thirdParty.sendApiKey(u.guid);case 3:p.ZP.success("Send API Key success"),i.next=11;break;case 6:return i.prev=6,i.t0=i.catch(0),console.error(i.t0),p.ZP.error("Send API Key error:"+String(i.t0)),i.abrupt("return",!1);case 11:case"end":return i.stop()}},h,null,[[0,6]])})),okText:"Yes",cancelText:"No",children:(0,a.jsx)(T.ZP,{type:"link",children:"Send API Key"})}),(0,a.jsx)(T.ZP,{type:"link",onClick:function(){N(u),U(!0)},children:"Edit"}),u.status=="able"?(0,a.jsx)(T.ZP,{type:"link",onClick:S()(o()().mark(function h(){var l;return o()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R.Z.thirdParty.editStatus(u.guid,"disable");case 3:p.ZP.success("Edit status success"),(l=c.current)===null||l===void 0||l.reload(),e.next=12;break;case 7:return e.prev=7,e.t0=e.catch(0),console.error(e.t0),p.ZP.error("Edit status error:"+String(e.t0)),e.abrupt("return",!1);case 12:case"end":return e.stop()}},h,null,[[0,7]])})),children:"Freeze"}):(0,a.jsx)(T.ZP,{type:"link",onClick:S()(o()().mark(function h(){var l;return o()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R.Z.thirdParty.editStatus(u.guid,"able");case 3:p.ZP.success("Edit status success"),(l=c.current)===null||l===void 0||l.reload(),e.next=12;break;case 7:return e.prev=7,e.t0=e.catch(0),console.error(e.t0),p.ZP.error("Edit status error:"+String(e.t0)),e.abrupt("return",!1);case 12:case"end":return e.stop()}},h,null,[[0,7]])})),children:"Activate"})]})}}];return(0,a.jsxs)(F._z,{children:[(0,a.jsx)(A.Z,{actionRef:c,rowKey:"guid",search:{labelWidth:120},columns:Z,toolBarRender:function(){return[(0,a.jsx)("div",{children:(0,a.jsx)(T.ZP,{type:"link",onClick:function(){N(void 0),U(!0)},children:f.formatMessage({id:"pages.thirdParty.addApiThirdParty"})})})]},request:function(){var y=S()(o()().mark(function s(u,h){var l,i,e,B,I,v,t;return o()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:e=!1,B="",d.t0=o()().keys(h);case 3:if((d.t1=d.t0()).done){d.next=11;break}return I=d.t1.value,B=I,v=h[I],(v==null?void 0:v.toString())=="descend"&&(e=!0),d.abrupt("break",11);case 11:return u.page=u==null?void 0:u.current,delete u.current,d.next=15,R.Z.thirdParty.getPageList(u);case 15:return t=d.sent,d.abrupt("return",{data:(l=t.data)===null||l===void 0?void 0:l.list,success:t.code==0,total:(i=t.data)===null||i===void 0?void 0:i.total});case 17:case"end":return d.stop()}},s)}));return function(s,u){return y.apply(this,arguments)}}(),scroll:{x:!0}}),(0,a.jsx)(_,{visible:L,onVisibleChange:function(s){U(s),s||N(void 0)},onFinish:function(){var s;(s=c.current)===null||s===void 0||s.reload(),N(void 0)},currentUser:x})]})},re=ee},65763:function(W,w,r){r.d(w,{B:function(){return o}});var z=r(90482);function o(C,S){if(!C)return"";var O=new z.Z(C),j=C.split(".");if(j.length!==2)return C;for(var R=j[0],K=j[1],F=0,A="",b=0;b<K.length;b++){var E=K[b];if(A.length>=S)break;E=="0"&&A.length==0?F=F+1:A=A+E}return F>3?R+".0{"+F+"}"+A:R+"."+"0".repeat(F)+A}}}]);
