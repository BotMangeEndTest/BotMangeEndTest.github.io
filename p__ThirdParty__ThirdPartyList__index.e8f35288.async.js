"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[241],{57660:function(W,$,a){a.r($),a.d($,{default:function(){return re}});var L=a(15009),o=a.n(L),F=a(99289),S=a.n(F),z=a(5574),b=a.n(z),P=a(75472),K=a(65763),M=a(90930),j=a(38521),A=a(94272),w=a(58073),G=a(86738),p=a(2453),T=a(83622),C=a(67294),H=a(6742),E=a(34994),J=a(37476),Y=a(26915),Q=a(26412),D=a(37804),X=a(52720),n=a(85893),q=function(k){var V=k.visible,x=k.onVisibleChange,N=k.onFinish,g=k.currentUser,I=(0,C.useRef)(),O=(0,C.useState)(void 0),U=b()(O,2),c=U[0],v=U[1],Z=(0,A.useIntl)(),y=(0,C.useState)([]),t=b()(y,2),d=t[0],h=t[1];if(g){var l;(l=I.current)===null||l===void 0||l.setFieldsValue({orgName:g.orgName,tradingFeeRate:g.tradingFeeRate/100,commissionRate:g.commissionRate/100,icon:g.icon})}var i=function(){var R=S()(o()().mark(function f(s){var m,u;return o()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(m="",r.prev=1,!g){r.next=8;break}return m=g.guid,r.next=6,P.Z.thirdParty.update(m,s.orgName,s.tradingFeeRate,s.commissionRate,s.icon);case 6:r.next=13;break;case 8:if(c){r.next=10;break}return r.abrupt("return");case 10:return m=c.guid,r.next=13,P.Z.thirdParty.add(m,s.orgName,s.tradingFeeRate,s.commissionRate,s.icon);case 13:p.ZP.success("success"),x(!1),N(),(u=I.current)===null||u===void 0||u.resetFields(),v(void 0),r.next=25;break;case 20:return r.prev=20,r.t0=r.catch(1),console.error(r.t0),p.ZP.error("error: "+String(r.t0)),r.abrupt("return",!1);case 25:case"end":return r.stop()}},f,null,[[1,20]])}));return function(s){return R.apply(this,arguments)}}(),e=function(){var R=S()(o()().mark(function f(s){var m,u;return o()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,s.target.value){r.next=3;break}return r.abrupt("return");case 3:return r.next=5,(0,H.getUserByRef)(s.target.value);case 5:m=r.sent,m!==void 0&&(u={guid:m.guid,tgUsername:m.tgUsername,email:m.email,vip:m.vip,remark:m.remark},p.ZP.success("User Found"),v(u)),r.next=13;break;case 9:r.prev=9,r.t0=r.catch(0),v(void 0),p.ZP.error(Z.formatMessage({id:"pages.overall.user.notFound"}));case 13:case"end":return r.stop()}},f,null,[[0,9]])}));return function(s){return R.apply(this,arguments)}}();(0,C.useEffect)(function(){h(c?[{key:"1",label:"Guid",children:c.guid},{key:"2",label:"Tg Username",children:c.tgUsername},{key:"3",label:"Email",children:c.email},{key:"4",label:"Vip Level",children:c.vip},{key:"5",label:"Remark",span:2,children:c.remark}]:[])},[c]);var B=function(){if(!g)return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(E.A.Item,{name:"refCode",label:Z.formatMessage({id:"pages.overall.newSvip.refCode"}),rules:[{required:!0,message:"Please enter refCode!"}],children:(0,n.jsx)(Y.Z,{onBlur:e,placeholder:Z.formatMessage({id:"pages.overall.newSvip.refCode.placeholder"}),max:16})}),c&&(0,n.jsx)(Q.Z,{size:"small",title:"User Info",layout:"vertical",items:d})]})};return(0,n.jsxs)(J.Y,{open:V,onOpenChange:function(f){if(!f){var s;I==null||(s=I.current)===null||s===void 0||s.resetFields(),v(void 0),x(f)}},clearOnDestroy:!0,onFinish:i,formRef:I,children:[B(),(0,n.jsx)(E.A.Item,{name:"orgName",label:Z.formatMessage({id:"pages.thirdParty.orgName"}),rules:[{required:!0,message:"Please enter Organization Name!"}],children:(0,n.jsx)(Y.Z,{max:24})}),(0,n.jsx)(E.A.Item,{name:"tradingFeeRate",label:Z.formatMessage({id:"pages.thirdParty.tradingFeeRate"}),rules:[{required:!0,message:"Please enter Trading Fee Rate!"}],initialValue:6,children:(0,n.jsx)(D.Z,{size:"large",addonAfter:"%",precision:0,min:0,max:2})}),(0,n.jsx)(E.A.Item,{name:"commissionRate",label:Z.formatMessage({id:"pages.thirdParty.commissionRate"}),rules:[{required:!0,message:"Please enter Commission Rate!"}],initialValue:30,children:(0,n.jsx)(D.Z,{size:"large",addonAfter:"%",precision:0,min:0,max:60})}),(0,n.jsx)(E.A.Item,{name:"icon",label:Z.formatMessage({id:"icon"}),rules:[{required:!0,message:"Please upload icon!"}],children:(0,n.jsx)(X.Ur,{uploadFinish:function(f){var s;(s=I.current)===null||s===void 0||s.setFieldsValue({icon:f})},url:g==null?void 0:g.icon})})]})},_=q,ee=function(){var k=(0,C.useState)(void 0),V=b()(k,2),x=V[0],N=V[1],g=(0,C.useState)(!1),I=b()(g,2),O=I[0],U=I[1],c=(0,C.useRef)(),v=(0,A.useIntl)(),Z=[{title:v.formatMessage({id:"icon"}),dataIndex:"icon",hideInSearch:!0,render:function(t,d){return(0,n.jsx)(w.Z,{src:d.icon,width:32,height:32})}},{title:v.formatMessage({id:"name"}),dataIndex:"orgName",hideInSearch:!0},{title:"Guid",dataIndex:"guid"},{title:"Email",dataIndex:"email",hideInSearch:!0},{title:v.formatMessage({id:"status"}),dataIndex:"status",hideInSearch:!0,valueEnum:{enabled:{text:"Enabled",color:"green"},disabled:{text:"Disabled",color:"red"}}},{title:v.formatMessage({id:"pages.thirdParty.userNums"}),dataIndex:"userNums",hideInSearch:!0},{title:v.formatMessage({id:"pages.thirdParty.volumes"}),dataIndex:"volumes",hideInSearch:!0,renderText:function(t){return"$"+(0,K.B)(t,3)}},{title:v.formatMessage({id:"pages.thirdParty.txns"}),dataIndex:"txns",hideInSearch:!0},{title:v.formatMessage({id:"pages.thirdParty.feeRate"}),dataIndex:"tradingFeeRate",hideInSearch:!0,renderText:function(t){return t/100+"%"}},{title:v.formatMessage({id:"pages.thirdParty.commissionRate"}),dataIndex:"commissionRate",hideInSearch:!0,renderText:function(t){return t/100+"%"}},{title:v.formatMessage({id:"pages.thirdParty.channelCommission"}),dataIndex:"channelCommission",hideInSearch:!0,renderText:function(t){return"$"+(0,K.B)(t,3)}},{title:"API Key",dataIndex:"apiKey",hideInSearch:!0},{title:v.formatMessage({id:"options"}),hideInSearch:!0,render:function(t,d){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(G.Z,{title:"Reset API Key",description:"Are you sure to Reset API Key?",onConfirm:S()(o()().mark(function h(){var l;return o()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P.Z.thirdParty.resetApiKey(d.guid);case 3:p.ZP.success("Reset API Key success"),(l=c.current)===null||l===void 0||l.reload(),e.next=12;break;case 7:return e.prev=7,e.t0=e.catch(0),console.error(e.t0),p.ZP.error("Reset API Key error:"+String(e.t0)),e.abrupt("return",!1);case 12:case"end":return e.stop()}},h,null,[[0,7]])})),okText:"Yes",cancelText:"No",children:(0,n.jsx)(T.ZP,{type:"link",children:"Reset API Key"})}),(0,n.jsx)(G.Z,{title:"Send API Key",description:"Are you sure to Send API Key to ".concat(d.email,"?"),onConfirm:S()(o()().mark(function h(){return o()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,P.Z.thirdParty.sendApiKey(d.guid);case 3:p.ZP.success("Send API Key success"),i.next=11;break;case 6:return i.prev=6,i.t0=i.catch(0),console.error(i.t0),p.ZP.error("Send API Key error:"+String(i.t0)),i.abrupt("return",!1);case 11:case"end":return i.stop()}},h,null,[[0,6]])})),okText:"Yes",cancelText:"No",children:(0,n.jsx)(T.ZP,{type:"link",children:"Send API Key"})}),(0,n.jsx)(T.ZP,{type:"link",onClick:function(){N(d),U(!0)},children:"Edit"}),d.status=="enabled"?(0,n.jsx)(T.ZP,{type:"link",onClick:S()(o()().mark(function h(){var l;return o()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P.Z.thirdParty.editStatus(d.guid,"disabled");case 3:p.ZP.success("Edit status success"),(l=c.current)===null||l===void 0||l.reload(),e.next=12;break;case 7:return e.prev=7,e.t0=e.catch(0),console.error(e.t0),p.ZP.error("Edit status error:"+String(e.t0)),e.abrupt("return",!1);case 12:case"end":return e.stop()}},h,null,[[0,7]])})),children:"Disabled"}):(0,n.jsx)(T.ZP,{type:"link",onClick:S()(o()().mark(function h(){var l;return o()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P.Z.thirdParty.editStatus(d.guid,"enabled");case 3:p.ZP.success("Edit status success"),(l=c.current)===null||l===void 0||l.reload(),e.next=12;break;case 7:return e.prev=7,e.t0=e.catch(0),console.error(e.t0),p.ZP.error("Edit status error:"+String(e.t0)),e.abrupt("return",!1);case 12:case"end":return e.stop()}},h,null,[[0,7]])})),children:"Enabled"})]})}}];return(0,n.jsxs)(M._z,{children:[(0,n.jsx)(j.Z,{actionRef:c,rowKey:"guid",search:{labelWidth:120},columns:Z,toolBarRender:function(){return[(0,n.jsx)("div",{children:(0,n.jsx)(T.ZP,{type:"link",onClick:function(){N(void 0),U(!0)},children:v.formatMessage({id:"pages.thirdParty.addApiThirdParty"})})})]},request:function(){var y=S()(o()().mark(function t(d,h){var l,i,e,B,R,f,s;return o()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:e=!1,B="",u.t0=o()().keys(h);case 3:if((u.t1=u.t0()).done){u.next=11;break}return R=u.t1.value,B=R,f=h[R],(f==null?void 0:f.toString())=="descend"&&(e=!0),u.abrupt("break",11);case 11:return d.page=d==null?void 0:d.current,delete d.current,u.next=15,P.Z.thirdParty.getPageList(d);case 15:return s=u.sent,u.abrupt("return",{data:(l=s.data)===null||l===void 0?void 0:l.list,success:s.code==0,total:(i=s.data)===null||i===void 0?void 0:i.total});case 17:case"end":return u.stop()}},t)}));return function(t,d){return y.apply(this,arguments)}}(),scroll:{x:!0}}),(0,n.jsx)(_,{visible:O,onVisibleChange:function(t){U(t),t||N(void 0)},onFinish:function(){var t;(t=c.current)===null||t===void 0||t.reload(),N(void 0)},currentUser:x})]})},re=ee},65763:function(W,$,a){a.d($,{B:function(){return o}});var L=a(90482);function o(F,S){if(!F)return"";var z=new L.Z(F),b=F.split(".");if(b.length!==2)return F;for(var P=b[0],K=b[1],M=0,j="",A=0;A<K.length;A++){var w=K[A];if(j.length>=S)break;w=="0"&&j.length==0?M=M+1:j=j+w}return M>3?P+".0{"+M+"}"+j:P+"."+"0".repeat(M)+j}}}]);
