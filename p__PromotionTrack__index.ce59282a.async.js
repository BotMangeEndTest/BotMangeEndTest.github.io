(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[798],{46809:function(A,W,a){"use strict";a.r(W),a.d(W,{default:function(){return Ze}});var J=a(15009),g=a.n(J),x=a(99289),w=a.n(x),y=a(5574),u=a.n(y),E=a(92861),B=a(29933),Y=a(94272),R=a(78957),S=a(83622),I=a(4393),K=a(55054),le=a(74330),D=a(78045),oe=a(26915),Q=a(96068),de=a(85265),ce=a(9220),n=a(67294),ve=a(64599),fe=a.n(ve),pe=a(80652),me=a(27484),U=a.n(me),e=a(85893),he=function(h){var o=h.type,s=h.value,F=(0,n.useState)(!1),f=u()(F,2),V=f[0],p=f[1],Z=(0,Y.useIntl)(),T=(0,n.useState)([]),P=u()(T,2),M=P[0],C=P[1],H=function(){var j=w()(g()().mark(function i(){var d,m,t,b,L,N;return g()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,p(!0),c.next=4,E.Z.promotionTrack.getListByDay(30,o,s);case 4:if(d=c.sent,d){m=[],t=fe()(d);try{for(t.s();!(b=t.n()).done;)L=b.value,N=U()(L.date).format("YYYY-MM-DD"),m.push({date:N,type:Z.formatMessage({id:"pages.promotionTrack.view"}),count:L.view}),m.push({date:N,type:Z.formatMessage({id:"pages.promotionTrack.download"}),count:L.download}),m.push({date:N,type:Z.formatMessage({id:"pages.promotionTrack.register"}),count:L.register})}catch(k){t.e(k)}finally{t.f()}m=m.reverse(),C(m)}p(!1),c.next=14;break;case 9:return c.prev=9,c.t0=c.catch(0),p(!1),console.error(c.t0),c.abrupt("return",!1);case 14:case"end":return c.stop()}},i,null,[[0,9]])}));return function(){return j.apply(this,arguments)}}();return(0,n.useEffect)(function(){H()},[o,s]),(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(pe.Z,{data:M,xField:"date",yField:"count",colorField:"type",axis:{y:{labelFormatter:function(i){return i.toLocaleString()}}},shapeField:"smooth",scale:{y:{domainMin:0}},tooltip:{channel:"y",valueFormatter:function(i){return i.toLocaleString()}}})})},ge=he,xe=function(h){var o=h.type,s=h.value,F=(0,n.useState)(!1),f=u()(F,2),V=f[0],p=f[1],Z=(0,n.useState)([]),T=u()(Z,2),P=T[0],M=T[1],C=[{title:"date",dataIndex:"date",render:function(i,d,m){return U()(i).format("YYYY-MM-DD")}},{title:"\u8BBF\u95EE\u6B21\u6570",dataIndex:"view"},{title:"\u4E0B\u8F7D\u6B21\u6570",dataIndex:"download"},{title:"\u6CE8\u518C\u6B21\u6570",dataIndex:"register"},{title:"\u72EC\u7ACBIP\u6570",dataIndex:"ip"},{title:"\u72EC\u7ACB\u8BBE\u5907\u6570",dataIndex:"deviceId"}],H=function(){var j=w()(g()().mark(function i(){var d;return g()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,p(!0),t.next=4,E.Z.promotionTrack.getListByLimit(90,o,s);case 4:d=t.sent,d&&M(d),p(!1),t.next=14;break;case 9:return t.prev=9,t.t0=t.catch(0),p(!1),console.error(t.t0),t.abrupt("return",!1);case 14:case"end":return t.stop()}},i,null,[[0,9]])}));return function(){return j.apply(this,arguments)}}();return(0,n.useEffect)(function(){H()},[o,s]),(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(Q.Z,{size:"small",columns:C,dataSource:P,pagination:!1})})},ye=xe,je=function(h){var o=h.type,s=h.value,F=(0,n.useState)(!1),f=u()(F,2),V=f[0],p=f[1],Z=(0,n.useState)([]),T=u()(Z,2),P=T[0],M=T[1],C=[{title:"\u65F6\u95F4",dataIndex:"eventTime",render:function(i,d,m){return U().unix(i).format("YYYY-MM-DD")},minWidth:120},{title:"Category",dataIndex:"category"},{title:"utm_source",dataIndex:"utmSource"},{title:"eid",dataIndex:"eid"},{title:"pid",dataIndex:"pid"},{title:"code",dataIndex:"code"},{title:"user_agent",dataIndex:"user_agent"},{title:"browser",dataIndex:"browser"},{title:"deviceId",dataIndex:"deviceId"},{title:"device",dataIndex:"device"},{title:"ip",dataIndex:"ip"},{title:"platform",dataIndex:"platform"},{title:"geo",dataIndex:"geo"},{title:"lang",dataIndex:"lang"},{title:"countryCode",dataIndex:"countryCode"},{title:"referer",dataIndex:"referer"},{title:"extra",dataIndex:"extra"}],H=function(){var j=w()(g()().mark(function i(){var d;return g()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,p(!0),t.next=4,E.Z.promotionTrack.getLogListByLimit(100,o,s);case 4:d=t.sent,d&&M(d),p(!1),t.next=14;break;case 9:return t.prev=9,t.t0=t.catch(0),p(!1),console.error(t.t0),t.abrupt("return",!1);case 14:case"end":return t.stop()}},i,null,[[0,9]])}));return function(){return j.apply(this,arguments)}}();return(0,n.useEffect)(function(){H()},[o,s]),(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(Q.Z,{size:"small",scroll:{x:!0},columns:C,dataSource:P,pagination:!1})})},Se=je,Ie=function(h){var o=h.type,s=h.value,F=(0,Y.useIntl)();return(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{className:"h1",children:"".concat(F.formatMessage({id:"pages.promotionTrack.utm_source"}),": ").concat(s)}),(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{className:"h3",children:"30\u5929\u63A8\u5E7F\u66F2\u7EBF"}),(0,e.jsx)(ge,{type:o,value:s})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{className:"h3",children:"\u8BBF\u95EE\u7EDF\u8BA1\u6570\u636E \uFF08\u6CE8\u610F\uFF0C\u53D6\u6700\u8FD190\u6761\uFF09"}),(0,e.jsx)(ye,{type:o,value:s})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{className:"h3",children:"\u8BBF\u95EE\u65E5\u5FD7 \uFF08\u6CE8\uFF0C\u53D6\u6700\u8FD1100\u6761\uFF09"}),(0,e.jsx)(Se,{type:o,value:s})]})]})},De=Ie,q=B.Z.Divider,Fe=function(){var h=(0,n.useState)(void 0),o=u()(h,2),s=o[0],F=o[1],f=(0,Y.useIntl)(),V=(0,n.useState)([]),p=u()(V,2),Z=p[0],T=p[1],P=(0,n.useState)(!1),M=u()(P,2),C=M[0],H=M[1],j=(0,n.useState)(!1),i=u()(j,2),d=i[0],m=i[1],t=(0,n.useState)("24H"),b=u()(t,2),L=b[0],N=b[1],_=(0,n.useState)("utm_source"),c=u()(_,2),k=c[0],Te=c[1],Ce=(0,n.useState)(""),ee=u()(Ce,2),te=ee[0],ae=ee[1],Le=(0,n.useState)(!1),re=u()(Le,2),Ee=re[0],ne=re[1],Be=(0,n.useState)(void 0),se=u()(Be,2),X=se[0],ie=se[1],Pe=[{title:"ID",dataIndex:"value"},{title:"\u8BBF\u95EE\u6B21\u6570",dataIndex:"view",sorter:function(r,l){return r.view-l.view}},{title:"\u4E0B\u8F7D\u6B21\u6570",dataIndex:"download",sorter:function(r,l){return r.download-l.download}},{title:"\u6CE8\u518C\u6B21\u6570",dataIndex:"register",sorter:function(r,l){return r.register-l.register}},{title:"\u72EC\u7ACBIP\u6570",dataIndex:"ip",sorter:function(r,l){return r.ip-l.ip}},{title:"\u72EC\u7ACB\u8BBE\u5907\u6570",dataIndex:"deviceId",sorter:function(r,l){return r.deviceId-l.deviceId}},{title:"\u5907\u6CE8\u4FE1\u606F"},{title:"\u64CD\u4F5C",render:function(r,l){return(0,e.jsx)(R.Z,{size:"middle",children:(0,e.jsx)(S.ZP,{type:"link",onClick:function(){ie({type:k,value:l.value}),ne(!0)},children:"\u8BE6\u60C5"})})}}],Me=function(){var v=w()(g()().mark(function r(){var l;return g()().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.next=2,E.Z.promotionTrack.get24HData();case 2:l=z.sent,F(l.data);case 4:case"end":return z.stop()}},r)}));return function(){return v.apply(this,arguments)}}(),ue=function(){var v=w()(g()().mark(function r(l){var G;return g()().wrap(function($){for(;;)switch($.prev=$.next){case 0:return m(!0),$.next=3,E.Z.promotionTrack.getStatisticalList(L,k,l);case 3:G=$.sent,G.data&&T(G.data),m(!1);case 6:case"end":return $.stop()}},r)}));return function(l){return v.apply(this,arguments)}}();return(0,n.useEffect)(function(){Me()},[]),(0,n.useEffect)(function(){ae(""),ue("")},[k,L]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(I.Z,{children:(0,e.jsx)(ce.Z,{onResize:function(r){H(r.width<596)},children:(0,e.jsxs)(B.Z.Group,{direction:C?"column":"row",children:[(0,e.jsx)(B.Z,{children:(0,e.jsx)(K.Z,{title:"24H\u603B\u8BBF\u95EE",value:s?s.view:"-"})}),(0,e.jsx)(q,{type:C?"horizontal":"vertical"}),(0,e.jsx)(B.Z,{children:(0,e.jsx)(K.Z,{title:"24H\u603B\u4E0B\u8F7D",value:s?s.download:"-"})}),(0,e.jsx)(q,{type:C?"horizontal":"vertical"}),(0,e.jsx)(B.Z,{children:(0,e.jsx)(K.Z,{title:"24H\u6CE8\u518C\u6570",value:s?s.register:"-"})})]})},"resize-observer")}),(0,e.jsx)(I.Z,{children:(0,e.jsxs)(le.Z,{spinning:d,tip:f.formatMessage({id:"loading"}),children:[(0,e.jsxs)("div",{className:"tools",children:[(0,e.jsxs)("div",{className:"search",children:[(0,e.jsx)("div",{className:"item",children:(0,e.jsx)(R.Z,{children:(0,e.jsxs)(D.ZP.Group,{value:k,onChange:function(r){return Te(r.target.value)},children:[(0,e.jsx)(D.ZP.Button,{value:"utm_source",children:f.formatMessage({id:"pages.promotionTrack.utm_source"})}),(0,e.jsx)(D.ZP.Button,{value:"eid",children:f.formatMessage({id:"pages.promotionTrack.eid"})}),(0,e.jsx)(D.ZP.Button,{value:"pid",children:f.formatMessage({id:"pages.promotionTrack.pid"})}),(0,e.jsx)(D.ZP.Button,{value:"code",children:f.formatMessage({id:"pages.promotionTrack.code"})})]})})}),(0,e.jsx)("div",{className:"item",children:(0,e.jsx)(oe.Z,{value:te,onChange:function(r){return ae(r.target.value)}})}),(0,e.jsx)("div",{className:"item",children:(0,e.jsx)(S.ZP,{onClick:function(){return ue(te)},children:"\u641C\u7D22"})})]}),(0,e.jsx)("div",{className:"filter",children:(0,e.jsx)(R.Z,{children:(0,e.jsxs)(D.ZP.Group,{value:L,onChange:function(r){return N(r.target.value)},children:[(0,e.jsx)(D.ZP.Button,{value:"24H",children:"24H"}),(0,e.jsx)(D.ZP.Button,{value:"7D",children:"7D"}),(0,e.jsx)(D.ZP.Button,{value:"1M",children:"1M"})]})})})]}),(0,e.jsx)("div",{children:(0,e.jsx)(Q.Z,{columns:Pe,dataSource:Z,pagination:!1})}),(0,e.jsx)(de.Z,{width:600,open:Ee,onClose:function(){ie(void 0),ne(!1)},closable:!1,children:X&&(0,e.jsx)(De,{type:X.type,value:X.value})})]})})]})},Ze=Fe},64599:function(A,W,a){var J=a(96263);function g(x,w){var y=typeof Symbol!="undefined"&&x[Symbol.iterator]||x["@@iterator"];if(!y){if(Array.isArray(x)||(y=J(x))||w&&x&&typeof x.length=="number"){y&&(x=y);var u=0,E=function(){};return{s:E,n:function(){return u>=x.length?{done:!0}:{done:!1,value:x[u++]}},e:function(I){throw I},f:E}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var B=!0,Y=!1,R;return{s:function(){y=y.call(x)},n:function(){var I=y.next();return B=I.done,I},e:function(I){Y=!0,R=I},f:function(){try{!B&&y.return!=null&&y.return()}finally{if(Y)throw R}}}}A.exports=g,A.exports.__esModule=!0,A.exports.default=A.exports}}]);
