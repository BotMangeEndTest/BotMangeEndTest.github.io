(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[241],{57660:function(_,V,a){"use strict";a.r(V),a.d(V,{default:function(){return Q}});var Y=a(15009),o=a.n(Y),z=a(99289),L=a.n(z),H=a(5574),T=a.n(H),Z=a(92861),B=a(65763),G=a(90930),W=a(38521),x=a(94272),$=a(58073),b=a(86738),m=a(2453),M=a(83622),f=a(67294),y=a(37476),v=a(34994),F=a(26915),E=a(37804),R=a(72269),D=a(52720),r=a(85893),N=function(S){var j=S.visible,C=S.onVisibleChange,K=S.onFinish,u=S.currentUser,P=(0,f.useRef)(),p=(0,x.useIntl)(),A=function(){var h=L()(o()().mark(function d(l){var g,t;return o()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,t=u.guid,i.next=4,Z.Z.thirdParty.update(t,l.orgName,l.tradingFeeRate,l.commissionRate,l.icon,l.isPublic,l.maxDelegateWallets,l.chainWalletWriteLimit,l.delegateWalletWriteLimit);case 4:m.ZP.success("success"),C(!1),K(),(g=P.current)===null||g===void 0||g.resetFields(),i.next=15;break;case 10:return i.prev=10,i.t0=i.catch(0),console.error(i.t0),m.ZP.error("error: "+String(i.t0)),i.abrupt("return",!1);case 15:case"end":return i.stop()}},d,null,[[0,10]])}));return function(l){return h.apply(this,arguments)}}();return(0,f.useEffect)(function(){if(u){var h;(h=P.current)===null||h===void 0||h.setFieldsValue({orgName:u.orgName,tradingFeeRate:u.tradingFeeRate/100,commissionRate:u.commissionRate/100,icon:u.icon,isPublic:u.isPublic,maxDelegateWallets:u.maxDelegateWallets,chainWalletWriteLimit:u.chainWalletWriteLimit,delegateWalletWriteLimit:u.delegateWalletWriteLimit})}}),(0,r.jsxs)(y.Y,{open:j,onOpenChange:function(d){if(!d){var l;P==null||(l=P.current)===null||l===void 0||l.resetFields(),C(d)}},clearOnDestroy:!0,onFinish:A,formRef:P,children:[(0,r.jsx)(v.A.Item,{name:"orgName",label:p.formatMessage({id:"pages.thirdParty.orgName"}),rules:[{required:!0,message:"Please enter Organization Name!"}],children:(0,r.jsx)(F.Z,{max:24})}),(0,r.jsx)(v.A.Item,{name:"tradingFeeRate",label:p.formatMessage({id:"pages.thirdParty.tradingFeeRate"}),rules:[{required:!0,message:"Please enter Trading Fee Rate!"}],initialValue:2,children:(0,r.jsx)(E.Z,{size:"large",addonAfter:"%",precision:2,min:0,max:2})}),(0,r.jsx)(v.A.Item,{name:"commissionRate",label:p.formatMessage({id:"pages.thirdParty.commissionRate"}),rules:[{required:!0,message:"Please enter Commission Rate!"}],initialValue:30,children:(0,r.jsx)(E.Z,{size:"large",addonAfter:"%",precision:2,min:0,max:60})}),(0,r.jsx)(v.A.Item,{name:"icon",label:p.formatMessage({id:"icon"}),children:(0,r.jsx)(D.Ur,{uploadFinish:function(d){var l;(l=P.current)===null||l===void 0||l.setFieldsValue({icon:d})},url:u==null?void 0:u.icon})}),(0,r.jsx)(v.A.Item,{name:"isPublic",label:p.formatMessage({id:"pages.thirdParty.isPublic"}),initialValue:!0,children:(0,r.jsx)(R.Z,{})}),(0,r.jsx)(v.A.Item,{name:"maxDelegateWallets",label:p.formatMessage({id:"pages.thirdParty.maxDelegateWallets"}),initialValue:0,children:(0,r.jsx)(E.Z,{size:"large",min:0,max:999999999})}),(0,r.jsx)(v.A.Item,{name:"chainWalletWriteLimit",label:p.formatMessage({id:"pages.thirdParty.chainWalletWriteLimit"}),initialValue:0,children:(0,r.jsx)(E.Z,{size:"large",min:0,max:99999})}),(0,r.jsx)(v.A.Item,{name:"delegateWalletWriteLimit",label:p.formatMessage({id:"pages.thirdParty.delegateWalletWriteLimit"}),initialValue:0,children:(0,r.jsx)(E.Z,{size:"large",min:0,max:99999})})]})},O=N,J=function(){var S=(0,f.useState)(void 0),j=T()(S,2),C=j[0],K=j[1],u=(0,f.useState)(!1),P=T()(u,2),p=P[0],A=P[1],h=(0,f.useRef)(),d=(0,x.useIntl)(),l=[{title:d.formatMessage({id:"icon"}),dataIndex:"icon",hideInSearch:!0,render:function(t,n){return n.icon?(0,r.jsx)($.Z,{src:n.icon,width:32,height:32}):(0,r.jsx)("div",{})}},{title:d.formatMessage({id:"name"}),dataIndex:"orgName",hideInSearch:!0},{title:"Guid",dataIndex:"guid"},{title:"Email",dataIndex:"email",hideInSearch:!0},{title:d.formatMessage({id:"status"}),dataIndex:"status",hideInSearch:!0,valueEnum:{enabled:{text:"Enabled",color:"green"},disabled:{text:"Disabled",color:"red"}}},{title:d.formatMessage({id:"pages.thirdParty.userNums"}),dataIndex:"userNums",hideInSearch:!0},{title:d.formatMessage({id:"pages.thirdParty.volumes"}),dataIndex:"volumes",hideInSearch:!0,renderText:function(t){return"$"+(0,B.BW)(t,3)}},{title:d.formatMessage({id:"pages.thirdParty.txns"}),dataIndex:"txns",hideInSearch:!0},{title:d.formatMessage({id:"pages.thirdParty.feeRate"}),dataIndex:"tradingFeeRate",hideInSearch:!0,renderText:function(t){return t/100+"%"}},{title:d.formatMessage({id:"pages.thirdParty.commissionRate"}),dataIndex:"commissionRate",hideInSearch:!0,renderText:function(t){return t/100+"%"}},{title:d.formatMessage({id:"pages.thirdParty.channelCommission"}),dataIndex:"channelCommission",hideInSearch:!0,renderText:function(t){return"$"+(0,B.BW)(t,3)}},{title:"API Key",dataIndex:"apiKey",hideInSearch:!0},{title:"Package",dataIndex:"aveCloudLevel",hideInSearch:!0,valueEnum:{0:{text:"Free",color:"blue"},1:{text:"Level1",color:"green"},2:{text:"Level2",color:"green"},3:{text:"Level3",color:"green"},4:{text:"Enterprise",color:"red"}}},{title:"Chain Write Limit",dataIndex:"chainWalletWriteLimit",hideInSearch:!0},{title:"Bot Write Limit",dataIndex:"delegateWalletWriteLimit",hideInSearch:!0},{title:"Delegate Wallets",hideInSearch:!0,render:function(t,n){return"".concat(n.currentDelegateWalletCount,"/").concat(n.maxDelegateWallets)}},{title:"IsPublic",dataIndex:"isPublic",hideInSearch:!0,valueEnum:{true:{text:"Y",color:"green"},false:{text:"N",color:"red"}}},{title:d.formatMessage({id:"options"}),hideInSearch:!0,render:function(t,n){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(b.Z,{title:"Reset API Key",description:"Are you sure to Reset API Key?",onConfirm:L()(o()().mark(function i(){var s;return o()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Z.Z.thirdParty.resetApiKey(n.guid);case 3:m.ZP.success("Reset API Key success"),(s=h.current)===null||s===void 0||s.reload(),e.next=12;break;case 7:return e.prev=7,e.t0=e.catch(0),console.error(e.t0),m.ZP.error("Reset API Key error:"+String(e.t0)),e.abrupt("return",!1);case 12:case"end":return e.stop()}},i,null,[[0,7]])})),okText:"Yes",cancelText:"No",children:(0,r.jsx)(M.ZP,{type:"link",children:"Reset API Key"})}),(0,r.jsx)(b.Z,{title:"Send API Key",description:"Are you sure to Send API Key to ".concat(n.email,"?"),onConfirm:L()(o()().mark(function i(){return o()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,Z.Z.thirdParty.sendApiKey(n.guid);case 3:m.ZP.success("Send API Key success"),c.next=11;break;case 6:return c.prev=6,c.t0=c.catch(0),console.error(c.t0),m.ZP.error("Send API Key error:"+String(c.t0)),c.abrupt("return",!1);case 11:case"end":return c.stop()}},i,null,[[0,6]])})),okText:"Yes",cancelText:"No",children:(0,r.jsx)(M.ZP,{type:"link",children:"Send API Key"})}),(0,r.jsx)(M.ZP,{type:"link",onClick:function(){K(n),A(!0)},children:"Edit"}),n.status=="enabled"?(0,r.jsx)(M.ZP,{type:"link",onClick:L()(o()().mark(function i(){var s;return o()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Z.Z.thirdParty.editStatus(n.guid,"disabled");case 3:m.ZP.success("Edit status success"),(s=h.current)===null||s===void 0||s.reload(),e.next=12;break;case 7:return e.prev=7,e.t0=e.catch(0),console.error(e.t0),m.ZP.error("Edit status error:"+String(e.t0)),e.abrupt("return",!1);case 12:case"end":return e.stop()}},i,null,[[0,7]])})),children:"Disabled"}):(0,r.jsx)(M.ZP,{type:"link",onClick:L()(o()().mark(function i(){var s;return o()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Z.Z.thirdParty.editStatus(n.guid,"enabled");case 3:m.ZP.success("Edit status success"),(s=h.current)===null||s===void 0||s.reload(),e.next=12;break;case 7:return e.prev=7,e.t0=e.catch(0),console.error(e.t0),m.ZP.error("Edit status error:"+String(e.t0)),e.abrupt("return",!1);case 12:case"end":return e.stop()}},i,null,[[0,7]])})),children:"Enabled"})]})}}];return(0,r.jsxs)(G._z,{children:[(0,r.jsx)(W.Z,{actionRef:h,rowKey:"guid",search:{labelWidth:120},columns:l,request:function(){var g=L()(o()().mark(function t(n,i){var s,c,e,q,X,w,k;return o()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:e=!1,q="",I.t0=o()().keys(i);case 3:if((I.t1=I.t0()).done){I.next=11;break}return X=I.t1.value,q=X,w=i[X],(w==null?void 0:w.toString())=="descend"&&(e=!0),I.abrupt("break",11);case 11:return n.page=n==null?void 0:n.current,delete n.current,I.next=15,Z.Z.thirdParty.getPageList(n);case 15:return k=I.sent,I.abrupt("return",{data:(s=k.data)===null||s===void 0?void 0:s.list,success:k.code==0,total:(c=k.data)===null||c===void 0?void 0:c.total});case 17:case"end":return I.stop()}},t)}));return function(t,n){return g.apply(this,arguments)}}(),scroll:{x:!0}}),(0,r.jsx)(O,{visible:p,onVisibleChange:function(t){A(t),t||K(void 0)},onFinish:function(){var t;(t=h.current)===null||t===void 0||t.reload(),K(void 0)},currentUser:C||void 0})]})},Q=J},65763:function(_,V,a){"use strict";a.d(V,{BW:function(){return Z},q0:function(){return G},rD:function(){return B}});var Y=a(64599),o=a.n(Y),z=a(27484),L=a.n(z),H=a(90482),T=a(84105);function Z(W,x){if(!W)return"";var $=new H.Z(W),b=W.split(".");if(b.length!==2)return W;for(var m=b[0],M=b[1],f=0,y="",v=0;v<M.length;v++){var F=M[v];if(y.length>=x)break;F=="0"&&y.length==0?f=f+1:y=y+F}return f>3?m+".0{"+f+"}"+y:m+"."+"0".repeat(f)+y}function B(W,x,$,b,m,M){var f=new Set,y=new Set,v=o()(b),F;try{for(v.s();!(F=v.n()).done;){var E=F.value;f.add(E[W]),y.add(E[x])}}catch(s){v.e(s)}finally{v.f()}console.log("mainKeyList",f),console.log("timeKeyList",y);var R=new Map,D=o()(b),r;try{for(D.s();!(r=D.n()).done;){var N=r.value,O=N[x],J=N[W],Q=N[$];R.has(O)||R.set(O,new Map),R.get(O).set(J,Q)}}catch(s){D.e(s)}finally{D.f()}console.log("tempMap",R);var U=[],S=[];S.push("time");var j=o()(f),C;try{for(j.s();!(C=j.n()).done;){var K=C.value;S.push(K)}}catch(s){j.e(s)}finally{j.f()}U.push(S);var u=o()(y),P;try{for(u.s();!(P=u.n()).done;){var p=P.value,A=[];A.push(p);var h=o()(f),d;try{for(h.s();!(d=h.n()).done;){var l=d.value;R.has(p)&&R.get(p).has(l)?A.push(R.get(p).get(l)):A.push("")}}catch(s){h.e(s)}finally{h.f()}U.push(A)}}catch(s){u.e(s)}finally{u.f()}var g=T.P6.aoa_to_sheet(U),t=T.P6.book_new();T.P6.book_append_sheet(t,g,"Sheet1");var n="";m=="daily"?n="(\u6BCF\u65E5)":m=="monthly"&&(n="(\u6BCF\u6708)");var i="".concat(L()().format("YYYYMMDDHHmmss")).concat(M.replaceAll(" ","")).concat(n,".xlsx");T.NC(t,i)}function G(W){var x=parseFloat(W);return x.toLocaleString("en-US")}},20067:function(){}}]);
